(window.webpackJsonp=window.webpackJsonp||[]).push([[181],{705:function(e,t,a){"use strict";a.r(t);var s=a(1),o=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"x-bank"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#x-bank"}},[e._v("#")]),e._v(" "),a("code",[e._v("x/bank")])]),e._v(" "),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[e._v("#")]),e._v(" Abstract")]),e._v(" "),a("p",[e._v("This document specifies the bank module of the Cosmos SDK.")]),e._v(" "),a("p",[e._v("The bank module is responsible for handling multi-asset coin transfers between\naccounts and tracking special-case pseudo-transfers which must work differently\nwith particular kinds of accounts (notably delegating/undelegating for vesting\naccounts). It exposes several interfaces with varying capabilities for secure\ninteraction with other modules which must alter user balances.")]),e._v(" "),a("p",[e._v("In addition, the bank module tracks and provides query support for the total\nsupply of all assets used in the application.")]),e._v(" "),a("p",[e._v("This module is used in the Cosmos Hub.")]),e._v(" "),a("h2",{attrs:{id:"contents"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contents"}},[e._v("#")]),e._v(" Contents")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#supply"}},[e._v("Supply")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#total-supply"}},[e._v("Total Supply")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#module-accounts"}},[e._v("Module Accounts")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#permissions"}},[e._v("Permissions")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#state"}},[e._v("State")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#params"}},[e._v("Params")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#keepers"}},[e._v("Keepers")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#messages"}},[e._v("Messages")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#events"}},[e._v("Events")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#message-events"}},[e._v("Message Events")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#keeper-events"}},[e._v("Keeper Events")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#parameters"}},[e._v("Parameters")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#sendenabled"}},[e._v("SendEnabled")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#defaultsendenabled"}},[e._v("DefaultSendEnabled")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#client"}},[e._v("Client")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#cli"}},[e._v("CLI")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#query"}},[e._v("Query")])]),e._v(" "),a("li",[a("a",{attrs:{href:"#transactions"}},[e._v("Transactions")])])])]),e._v(" "),a("li",[a("a",{attrs:{href:"#grpc"}},[e._v("gRPC")])])]),e._v(" "),a("h2",{attrs:{id:"supply"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#supply"}},[e._v("#")]),e._v(" Supply")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("supply")]),e._v(" functionality:")]),e._v(" "),a("ul",[a("li",[e._v("passively tracks the total supply of coins within a chain,")]),e._v(" "),a("li",[e._v("provides a pattern for modules to hold/interact with "),a("code",[e._v("Coins")]),e._v(", and")]),e._v(" "),a("li",[e._v("introduces the invariant check to verify a chain's total supply.")])]),e._v(" "),a("h3",{attrs:{id:"total-supply"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#total-supply"}},[e._v("#")]),e._v(" Total Supply")]),e._v(" "),a("p",[e._v("The total "),a("code",[e._v("Supply")]),e._v(" of the network is equal to the sum of all coins from the\naccount. The total supply is updated every time a "),a("code",[e._v("Coin")]),e._v(" is minted (eg: as part\nof the inflation mechanism) or burned (eg: due to slashing or if a governance\nproposal is vetoed).")]),e._v(" "),a("h2",{attrs:{id:"module-accounts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module-accounts"}},[e._v("#")]),e._v(" Module Accounts")]),e._v(" "),a("p",[e._v("The supply functionality introduces a new type of "),a("code",[e._v("auth.Account")]),e._v(" which can be used by\nmodules to allocate tokens and in special cases mint or burn tokens. At a base\nlevel these module accounts are capable of sending/receiving tokens to and from\n"),a("code",[e._v("auth.Account")]),e._v("s and other module accounts. This design replaces previous\nalternative designs where, to hold tokens, modules would burn the incoming\ntokens from the sender account, and then track those tokens internally. Later,\nin order to send tokens, the module would need to effectively mint tokens\nwithin a destination account. The new design removes duplicate logic between\nmodules to perform this accounting.")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("ModuleAccount")]),e._v(" interface is defined as follows:")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"dHlwZSBNb2R1bGVBY2NvdW50IGludGVyZmFjZSB7CiAgYXV0aC5BY2NvdW50ICAgICAgICAgICAgICAgLy8gc2FtZSBtZXRob2RzIGFzIHRoZSBBY2NvdW50IGludGVyZmFjZQoKICBHZXROYW1lKCkgc3RyaW5nICAgICAgICAgICAvLyBuYW1lIG9mIHRoZSBtb2R1bGU7IHVzZWQgdG8gb2J0YWluIHRoZSBhZGRyZXNzCiAgR2V0UGVybWlzc2lvbnMoKSBbXXN0cmluZyAgLy8gcGVybWlzc2lvbnMgb2YgbW9kdWxlIGFjY291bnQKICBIYXNQZXJtaXNzaW9uKHN0cmluZykgYm9vbAp9Cg=="}}),e._v(" "),a("blockquote",[a("p",[a("strong",[e._v("WARNING!")]),e._v("\nAny module or message handler that allows either direct or indirect sending of funds must explicitly guarantee those funds cannot be sent to module accounts (unless allowed).")])]),e._v(" "),a("p",[e._v("The supply "),a("code",[e._v("Keeper")]),e._v(" also introduces new wrapper functions for the auth "),a("code",[e._v("Keeper")]),e._v("\nand the bank "),a("code",[e._v("Keeper")]),e._v(" that are related to "),a("code",[e._v("ModuleAccount")]),e._v("s in order to be able\nto:")]),e._v(" "),a("ul",[a("li",[e._v("Get and set "),a("code",[e._v("ModuleAccount")]),e._v("s by providing the "),a("code",[e._v("Name")]),e._v(".")]),e._v(" "),a("li",[e._v("Send coins from and to other "),a("code",[e._v("ModuleAccount")]),e._v("s or standard "),a("code",[e._v("Account")]),e._v("s\n("),a("code",[e._v("BaseAccount")]),e._v(" or "),a("code",[e._v("VestingAccount")]),e._v(") by passing only the "),a("code",[e._v("Name")]),e._v(".")]),e._v(" "),a("li",[a("code",[e._v("Mint")]),e._v(" or "),a("code",[e._v("Burn")]),e._v(" coins for a "),a("code",[e._v("ModuleAccount")]),e._v(" (restricted to its permissions).")])]),e._v(" "),a("h3",{attrs:{id:"permissions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#permissions"}},[e._v("#")]),e._v(" Permissions")]),e._v(" "),a("p",[e._v("Each "),a("code",[e._v("ModuleAccount")]),e._v(" has a different set of permissions that provide different\nobject capabilities to perform certain actions. Permissions need to be\nregistered upon the creation of the supply "),a("code",[e._v("Keeper")]),e._v(" so that every time a\n"),a("code",[e._v("ModuleAccount")]),e._v(" calls the allowed functions, the "),a("code",[e._v("Keeper")]),e._v(" can lookup the\npermissions to that specific account and perform or not perform the action.")]),e._v(" "),a("p",[e._v("The available permissions are:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("Minter")]),e._v(": allows for a module to mint a specific amount of coins.")]),e._v(" "),a("li",[a("code",[e._v("Burner")]),e._v(": allows for a module to burn a specific amount of coins.")]),e._v(" "),a("li",[a("code",[e._v("Staking")]),e._v(": allows for a module to delegate and undelegate a specific amount of coins.")])])],1)}),[],!1,null,null,null);t.default=o.exports}}]);